<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ACÄ°L</title>

<style>
body{
  font-family:system-ui, sans-serif;
  background:#fff;
  margin:0;
  padding:24px;
  text-align:center;
}
button{
  width:100%;
  padding:26px;
  font-size:22px;
  font-weight:700;
  border:none;
  border-radius:16px;
  margin-top:18px;
  cursor:pointer;
}
#panicBtn{background:#d32f2f;color:#fff}
#acilKisiBtn{background:#222;color:#fff}
#info{
  margin-top:24px;
  font-size:14px;
  color:#555;
}
</style>
</head>

<body>

<h2>Acil Durum</h2>

<button id="panicBtn">ğŸš¨ ACÄ°L</button>
<button id="acilKisiBtn">ğŸ‘¤ ACÄ°L KÄ°ÅÄ°</button>

<div id="info">
BasÄ±lÄ± tut â†’ arama baÅŸlar
</div>

<script>
/* === AYARLANABÄ°LÄ°R SABÄ°TLER === */
const USER_NAME = "Ä°SÄ°M SOYÄ°SÄ°M";
const ACIL_KISI_TEL = "05XXXXXXXXX";
const HOLD_TIME = 1200; // ms

let holdTimer = null;

/* === BASILI TUTMA MEKANÄ°ÄÄ° === */
function bindHold(button, onHold){
  button.addEventListener("touchstart", start);
  button.addEventListener("mousedown", start);

  button.addEventListener("touchend", cancel);
  button.addEventListener("mouseup", cancel);
  button.addEventListener("mouseleave", cancel);

  function start(){
    holdTimer = setTimeout(onHold, HOLD_TIME);
  }
  function cancel(){
    clearTimeout(holdTimer);
  }
}

/* === ACÄ°L 112 === */
bindHold(document.getElementById("panicBtn"), ()=>{
  location.href = "tel:112";
});

/* === ACÄ°L KÄ°ÅÄ° === */
bindHold(document.getElementById("acilKisiBtn"), ()=>{
  // 1ï¸âƒ£ Direkt arama
  location.href = "tel:" + ACIL_KISI_TEL;

  // 2ï¸âƒ£ Konum + saat al
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      const map = `https://maps.google.com/?q=${lat},${lon}`;
      const time = new Date().toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});
      const msg =
        `${USER_NAME} â€“ ACÄ°L DURUM\n` +
        `Konum: ${map}\n` +
        `Saat: ${time}`;

      // 3ï¸âƒ£ SMS taslaÄŸÄ± (webâ€™de mÃ¼mkÃ¼n olan en ileri seviye)
      location.href = "sms:" + ACIL_KISI_TEL + "?body=" + encodeURIComponent(msg);
    });
  }
});
</script>

</body>
</html>
